<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2016 by kevinfjbecker (http://jsbin.com/rumowu/5/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
<style id="jsbin-css">
rect {
  shape-rendering: optimizeQuality;
}
</style>
</head>
<body>

<script id="jsbin-javascript">
// Dice Selector //////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////

var withHeight = 50;
var padding = 5;
var rounding = 10;

///////////////////////////////////////////////////////////////////////////////

var data = ['blue', 'yellow', 'grey'];
var svg = d3.select('body').append('svg')
.attr('width', 400);

///////////////////////////////////////////////////////////////////////////////

update();

///////////////////////////////////////////////////////////////////////////////

function diceMenu() {

  var menu = svg.append('g');
  var diceOptions = ['Sienna','grey','black','blue','red','yellow'];

  menu.append('rect')
    .attr('width', (withHeight + padding) * diceOptions.length + padding)
    .attr('height', withHeight + 2 * padding)
    .attr('rx', rounding)
    .attr('ry', rounding)
    .style('fill', 'white')
    .style('stroke', 'black');

  menu.append('g').selectAll('rect')
    .data(diceOptions)
    .enter().append('rect')
    .attr('width', withHeight)
    .attr('height', withHeight)
    .attr('x', function(d, i){ return (withHeight + padding)  * i + padding; })
    .attr('y', padding)
    .attr('rx', rounding)
    .attr('ry', rounding)
    .style('fill', function(d){ return d3.rgb(d).brighter(); })
    .style('stroke', function(d){ return d3.rgb(d).darker(); })
    .on('click', function(d){
      data.push(d);
      menu.remove();
      update();
    });
}

function update() {
  var dice = svg.selectAll('rect')
  .data(data);

  dice.enter().append('rect')
    .attr('width', withHeight)
    .attr('height', withHeight)
    .attr('x', function(d, i){ return (withHeight + padding)  * i; })
    .attr('rx', rounding)
    .attr('ry', rounding);

  dice.style('fill', function(d){ return d3.rgb(d).brighter(); })
    .style('stroke', function(d){ return d3.rgb(d).darker(); })
    .style('stroke-dasharray', null)
    .on('click', function(d, i){
      data.splice(i, 1);
      update();
    });

  if(data.length < 5) {
    svg.append('rect')
      .attr('width', withHeight)
      .attr('height', withHeight)
      .attr('x', data.length * (withHeight + padding))
      .attr('rx', rounding)
      .attr('ry', rounding)
      .style('fill', 'white')
      .style('stroke', '#222')
      .style('stroke-dasharray', "3, 3")
      .on('click', function(){ diceMenu(); });
  }

  dice.exit().remove();

}

</script>
</body>
</html>